<!-- Willian -->

<!-- As requisições desse formulário podem ser enviadas para crud.php ou crud2.php -->

<html>
	<head>
		<meta charset="utf-8"/>
		<title>Cadastro</title>
	</head>

	<body>
		<form>
			<label for="nome">Nome:</label>
			<input type="text" id="nome" name="nome"/>

			<br />

			<label for="telefone">Telefone:</label>
			<input type="text" id="telefone" name="telefone" maxlength="8" />

			<br />

			<input type="submit" value="Enviar" name="enviar" id="enviar"/>
		</form>

		<script src="jquery.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(document).ready(function(){

				var enviarClick = function(e){

					// para prevenir que o botão ('submit') submeta os dados
					e.preventDefault();

					var contato = {
						nome: $('#nome').val(),
						telefone: $('#telefone').val()
					};

					var jqXhr = $.ajax({
						url: 'crud2.php',
						method: 'POST',
						data: contato
					});

					var sucesso = function sucesso(data){
						console.log(data);
						alert('Cadastrado.');
						window.location = 'contatos.html';
					};

					var falha = function falha(jqXhr, textStatus, errorThrown){
						console.log(textStatus);
						console.log(jqXhr);
						alert(jqXhr.responseText);
					};

					jqXhr.done(sucesso);
					jqXhr.fail(falha);
				};

				$('#enviar').on('click', enviarClick);
			});
		</script>

	</body>
</html>
